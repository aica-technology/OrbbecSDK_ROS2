{
    "$schema": "https://docs.aica.tech/schemas/1-1-1/component.schema.json",
    "name": "Orbbec Camera",
    "description": {
        "brief": "Stream color and depth images from an Orbbec camera."
    },
    "inherits": "rclcpp::Node",
    "registration": "orbbec_camera::OBCameraNodeDriver",
    "parameters": [
      {
        "display_name": "Camera Name",
        "description": "Name of the camera, used to set the frame names",
        "parameter_name": "camera_name",
        "parameter_type": "string",
        "default_value": "camera"
      },
      {
        "display_name": "Serial Number",
        "description": "Serial number of the camera, required when using multiple cameras",
        "parameter_name": "serial_number",
        "parameter_type": "string",
        "default_value": null,
        "optional": true
      },
      {
        "display_name": "USB Port",
        "description": "USB port of the camera, required when using multiple cameras",
        "parameter_name": "usb_port",
        "parameter_type": "string",
        "default_value": null,
        "optional": true
      },
      {
        "display_name": "Number of Devices",
        "description": "Number of devices, required when using multiple cameras",
        "parameter_name": "device_num",
        "parameter_type": "int",
        "default_value": "1"
      },
      {
        "display_name": "Color Width",
        "description": "Width of the color image",
        "parameter_name": "color_width",
        "parameter_type": "int",
        "default_value": null,
        "optional": true
      },
      {
        "display_name": "Color Height",
        "description": "Height of the color image",
        "parameter_name": "color_height",
        "parameter_type": "int",
        "default_value": null,
        "optional": true
      },
      {
        "display_name": "Color FPS",
        "description": "Frames per second of the color stream",
        "parameter_name": "color_fps",
        "parameter_type": "int",
        "default_value": null,
        "optional": true
      },
      {
        "display_name": "Color Format",
        "description": "Format of the color image",
        "parameter_name": "color_format",
        "parameter_type": "string",
        "default_value": "MJPG",
        "internal": true
      },
      {
        "display_name": "Depth Width",
        "description": "Width of the depth image",
        "parameter_name": "depth_width",
        "parameter_type": "int",
        "default_value": null,
        "optional": true
      },
      {
        "display_name": "Depth Height",
        "description": "Height of the depth image",
        "parameter_name": "depth_height",
        "parameter_type": "int",
        "default_value": null,
        "optional": true
      },
      {
        "display_name": "Depth FPS",
        "description": "Frames per second of the depth stream",
        "parameter_name": "depth_fps",
        "parameter_type": "int",
        "default_value": null,
        "optional": true
      },
      {
        "display_name": "Depth Format",
        "description": "Format of the depth image",
        "parameter_name": "depth_format",
        "parameter_type": "string",
        "default_value": "Y16",
        "internal": true
      },
      {
        "display_name": "Enable Alignement",
        "description": "Enable the alignement of the color and depth image",
        "parameter_name": "depth_registration",
        "parameter_type": "bool",
        "default_value": "false"
      },
      {
        "display_name": "Alignement Mode",
        "description": "Alignement mode for color and depth image (HW or SW)",
        "parameter_name": "align_mode",
        "parameter_type": "string",
        "default_value": "HW"
      },
      {
        "display_name": "Alignment Target Stream",
        "description": "Target stream to align with (COLOR or DEPTH)",
        "parameter_name": "align_target_stream",
        "parameter_type": "string",
        "default_value": "COLOR",
        "internal": true
      },
      {
        "display_name": "Enable Threshold Filter",
        "description": "Enable the depth threshold filter (if enabled, set threshold_filter_max and threshold_filter_min)",
        "parameter_name": "enable_threshold_filter",
        "parameter_type": "bool",
        "default_value": "false"
      },
      {
        "display_name": "Threshold Filter Max",
        "description": "Max value of the threshold filter [mm]. Values in [0-16000].",
        "parameter_name": "threshold_filter_max",
        "parameter_type": "int",
        "default_value": null,
        "optional": true,
        "internal": true
      },
      {
        "display_name": "Threshold Filter Min",
        "description": "Min value of the threshold filter [mm]. Values in [0-16000], account for the minimum Z depth.",
        "parameter_name": "threshold_filter_min",
        "parameter_type": "int",
        "default_value": null,
        "optional": true,
        "internal": true
      },
      {
        "display_name": "Enable Temporal Filter",
        "description": "Enable the depth temporal filter (if enabled, set temporal_filter_diff_threshold and temporal_filter_weight)",
        "parameter_name": "enable_temporal_filter",
        "parameter_type": "bool",
        "default_value": "false"
      },
      {
        "display_name": "Temporal Filter Weight",
        "description": "Weight of the temporal filter",
        "parameter_name": "temporal_filter_weight",
        "parameter_type": "double",
        "default_value": null,
        "optional": true,
        "internal": true
      },
      {
        "display_name": "Temporal Filter Diff Threshold",
        "description": "Diff threshold of the temporal filter",
        "parameter_name": "temporal_filter_diff_threshold",
        "parameter_type": "double",
        "default_value": null,
        "optional": true,
        "internal": true
      },
      {
        "display_name": "Enable Noise Removal Filter",
        "description": "Enable the depth noise removal filter (if enabled, set noise_removal_filter_min_diff and noise_removal_filter_max_size)",
        "parameter_name": "enable_noise_removal_filter",
        "parameter_type": "bool",
        "default_value": "false"
      },
      {
        "display_name": "Noise Removal Filter Min Diff",
        "description": "Minimum difference for the noise removal filter",
        "parameter_name": "noise_removal_filter_min_diff",
        "parameter_type": "int",
        "default_value": null,
        "optional": true,
        "internal": true
      },
      {
        "display_name": "Noise Removal Filter Max Size",
        "description": "Maximum size for the noise removal filter",
        "parameter_name": "noise_removal_filter_max_size",
        "parameter_type": "int",
        "default_value": null,
        "optional": true,
        "internal": true
      },
      {
        "display_name": "Enable Spatial Filter",
        "description": "Enable the depth spatial filter (if enabled, set spatial_filter_alpha, spatial_filter_diff_threshold, spatial_filter_magnitude, spatial_filter_radius)",
        "parameter_name": "enable_spatial_filter",
        "parameter_type": "bool",
        "default_value": "false"
      },
      {
        "display_name": "Spatial Filter Alpha",
        "description": "Alpha value for the spatial filter",
        "parameter_name": "spatial_filter_alpha",
        "parameter_type": "double",
        "default_value": null,
        "optional": true,
        "internal": true
      },
      {
        "display_name": "Spatial Filter Diff Threshold",
        "description": "Diff threshold for the spatial filter",
        "parameter_name": "spatial_filter_diff_threshold",
        "parameter_type": "int",
        "default_value": null,
        "optional": true,
        "internal": true
      },
      {
        "display_name": "Spatial Filter Magnitude",
        "description": "Magnitude for the spatial filter",
        "parameter_name": "spatial_filter_magnitude",
        "parameter_type": "int",
        "default_value": null,
        "optional": true,
        "internal": true
      },
      {
        "display_name": "Spatial Filter Radius",
        "description": "Radius for the spatial filter",
        "parameter_name": "spatial_filter_radius",
        "parameter_type": "int",
        "default_value": null,
        "optional": true,
        "internal": true
      },
      {
        "display_name": "Enable Hole Filling Filter",
        "description": "Enable the hole filling filter (if enabled, optionally set the hole_filling_filter_mode)",
        "parameter_name": "enable_hole_filling_filter",
        "parameter_type": "bool",
        "default_value": "false"
      },
      {
        "display_name": "Hole Filling Filter Mode",
        "description": "Mode for the hole filling filter. Choose between FILL_TOP, FILL_NEAREST, FILL_FAREST.",
        "parameter_name": "hole_filling_filter_mode",
        "parameter_type": "string",
        "default_value": "FILL_TOP",
        "internal": true
      }      
    ],
    "outputs": [
      {
        "display_name": "Color Image",
        "description": "Raw color image stream",
        "signal_name": "color_image",
        "signal_type": "other",
        "custom_signal_type": "sensor_msgs::msg::Image"
      },
      {
        "display_name": "Color Camera Info",
        "description": "Color camera intrinsics",
        "signal_name": "color_camera_info",
        "signal_type": "other",
        "custom_signal_type": "sensor_msgs::msg::CameraInfo"
      },
      {
        "display_name": "Depth Image",
        "description": "Depth image stream, which is aligned with the color image if enabled",
        "signal_name": "depth_image",
        "signal_type": "other",
        "custom_signal_type": "sensor_msgs::msg::Image"
      },
      {
        "display_name": "Depth Camera Info",
        "description": "Depth camera intrinsics",
        "signal_name": "depth_camera_info",
        "signal_type": "other",
        "custom_signal_type": "sensor_msgs::msg::CameraInfo"
      }
    ]
}